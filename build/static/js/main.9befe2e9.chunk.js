(this.webpackJsonppuhelinluetteloo=this.webpackJsonppuhelinluetteloo||[]).push([[0],{20:function(e,n,t){},41:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),o=t(15),r=t.n(o),u=(t(20),t(3)),s=t(0),i=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(s.jsx)("div",{children:Object(s.jsx)("form",{children:Object(s.jsxs)("div",{children:[" filter shown with:",Object(s.jsx)("input",{value:n,onChange:t})]})})})},l=function(e){var n=e.addName,t=e.newName,c=e.handleNameChange,a=e.newNumber,o=e.handleNumberChange;return Object(s.jsxs)("form",{onSubmit:n,children:[Object(s.jsxs)("div",{children:[" name:",Object(s.jsx)("input",{value:t,onChange:c})]}),Object(s.jsxs)("div",{children:[" number:",Object(s.jsx)("input",{value:a,onChange:o})]}),Object(s.jsx)("button",{type:"submit",children:"add"})]})},d=function(e){var n=e.person,t=e.removePerson;return Object(s.jsxs)("li",{children:[n.name,": ",n.number," "," ",Object(s.jsx)("button",{onClick:t,children:"remove"})]})},m=t(4),j=t.n(m),b="/api/persons",h=function(){return j.a.get(b).then((function(e){return e.data}))},f=function(e){return j.a.post(b,e).then((function(e){return e.data}))},O=function(e){return j.a.put(b,e).then((function(e){return e.data}))},g=function(e){return j.a.delete("".concat(b,"/").concat(e)).then((function(e){return e.data}))},v=function(e){var n=e.message,t=e.messageClass;return null===n?null:Object(s.jsxs)("div",{className:t,children:[Object(s.jsx)("br",{}),Object(s.jsx)("em",{children:n})]})},x=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],o=Object(c.useState)(""),r=Object(u.a)(o,2),m=r[0],j=r[1],b=Object(c.useState)(""),x=Object(u.a)(b,2),p=x[0],w=x[1],C=Object(c.useState)(""),N=Object(u.a)(C,2),S=N[0],y=N[1],T=Object(c.useState)(null),k=Object(u.a)(T,2),F=k[0],L=k[1],P=Object(c.useState)(null),E=Object(u.a)(P,2),J=E[0],M=E[1];console.log("message: ",F),console.log("errorMessage: ",J),Object(c.useEffect)((function(){h().then((function(e){a(e)}))}),[]);var R=t.filter((function(e){return e.name.toLowerCase().includes(S)}));return Object(s.jsxs)("div",{children:[Object(s.jsx)(v,{message:F,messageClass:"person"}),Object(s.jsx)(v,{message:J,messageClass:"error"}),Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(i,{newFilter:S,handleFilterChange:function(e){y(e.target.value)}}),Object(s.jsx)("h3",{children:"add a new number"}),Object(s.jsx)(l,{addName:function(e){var n={name:m,number:p};e.preventDefault();var c=t.map((function(e){return e.name.toLocaleLowerCase()}));if(c.includes(m.toLowerCase())){var o=c.find((function(e){return e===m}));window.confirm("Name ".concat(o," is already in the phonebook, are you sure you want to change the number "))&&(console.log("t\xe4\xe4l"),O(n).then((function(e){var n=t.filter((function(n){return n.name!==e.name})).concat(e);a(n),j(""),w(""),console.log("updated name ".concat(e.name," number to ").concat(e.number)),L("Changed ".concat(e.name," number to ").concat(e.number)),setTimeout((function(){L(null)}),3e3)})).catch((function(e){M(""),setTimeout((function(){M(null)}),3e3)})))}else f(n).then((function(e){a(t.concat(e)),j(""),w(""),L("Added ".concat(e.name)),setTimeout((function(){L(null)}),3e3)})).catch((function(e){console.log(e.response.data.message),M("".concat(e.response.data.message)),setTimeout((function(){M(null)}),3e3)}))},newName:m,handleNameChange:function(e){j(e.target.value)},newNumber:p,handleNumberChange:function(e){w(e.target.value)}}),Object(s.jsx)("h3",{children:"Numbers"}),Object(s.jsx)("ul",{children:R.map((function(e){return Object(s.jsx)(d,{person:e,removePerson:function(){return function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Remove ".concat(n.name," "))&&g(n.id).then((function(c){L("Removed ".concat(n.name)),setTimeout((function(){L(null)}),3e3),a(t.filter((function(n){return n.id!==e})))})).catch((function(e){M("the note '".concat(n.name,"': '").concat(n.number,"' was already deleted from server")),setTimeout((function(){M(null)}),3e3)}))}(e.id)}},e.id)}))})]})};r.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(x,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.9befe2e9.chunk.js.map